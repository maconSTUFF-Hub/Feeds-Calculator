<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Speed & Feed Calculator — maconSTUFF</title>
<meta name="description" content="Router/CNC speed and feed calculator with unit controls, chipload suggestions, and SFM readouts.">
<style>
  :root{--bg:#0f1115;--card:#ffffff;--ink:#111;--muted:#666;--radius:16px;--pad:24px}
  *{box-sizing:border-box}
  body{margin:0;padding:var(--pad);background:var(--bg);color:var(--ink);display:flex;justify-content:center;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji"}
  #wrap{max-width:1080px;width:100%;background:var(--card);border-radius:var(--radius);padding:var(--pad);box-shadow:0 8px 30px rgba(0,0,0,.15)}
  .header{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
  .header h1{font-size:18px;margin:0}
  .header a{font-size:12px;text-decoration:none;color:inherit;opacity:.8}
  #feeds-app{max-width:960px;margin:0 auto}
  .card{background:rgba(255,255,255,.9);border:1px solid rgba(0,0,0,.08);border-radius:14px;padding:16px;box-shadow:0 1px 8px rgba(0,0,0,.05)}
  .grid{display:grid;gap:16px}
  .grid.cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}
  .grid.cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}
  @media (max-width:820px){.grid.cols-2,.grid.cols-3{grid-template-columns:1fr} body{padding:12px} #wrap{padding:16px}}
  label{font-size:12px;letter-spacing:.01em;color:#111;opacity:.8;display:block;margin-bottom:6px}
  input[type=number],select{width:100%;padding:10px 12px;border:1px solid rgba(0,0,0,.15);border-radius:10px;background:#fff;font-size:14px}
  .inline{display:grid;grid-template-columns:1fr 120px;align-items:center;gap:8px}
  .row{display:grid;gap:12px;grid-template-columns:1fr 1fr 1fr}.row>div{min-width:0}
  .pill{display:inline-block;padding:6px 10px;border-radius:999px;background:rgba(0,0,0,.05);font-size:12px}
  .muted{opacity:.75}.btn{display:inline-block;border:1px solid rgba(0,0,0,.2);background:#111;color:#fff;padding:10px 14px;border-radius:999px;font-size:14px;cursor:pointer}
  .btn.secondary{background:#fff;color:#111}.result{font-size:clamp(22px,3.5vw,36px);font-weight:700}.help{font-size:12px;line-height:1.45;opacity:.8}
  .section-title{font-weight:700;font-size:14px;letter-spacing:.06em;text-transform:uppercase;opacity:.75;margin-bottom:8px}
  .range{display:flex;gap:8px;align-items:center}.range input[type=range]{width:100%}
  .code{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:12px;background:rgba(0,0,0,.05);padding:4px 6px;border-radius:6px}
  footer{margin-top:16px;font-size:12px;color:var(--muted);text-align:center}
</style>
</head>
<body>
<div id="wrap">
  <div class="header">
    <h1>Speed &amp; Feed Calculator</h1>
    <a href="https://www.maconstuff.com" target="_blank" rel="noopener">maconSTUFF</a>
  </div>
  <div id="feeds-app" data-init="0">
    <div class="grid cols-2">
      <div class="card">
        <div class="section-title">Inputs</div>
        <div class="grid cols-2">
          <div><label>Material</label>
            <select id="material">
              <option value="ply_mdf">Plywood / MDF</option>
              <option value="hardwood">Hardwood</option>
              <option value="softwood">Softwood</option>
              <option value="acrylic">Acrylic</option>
              <option value="aluminum">Aluminum (router)</option>
              <option value="brass">Brass (router)</option>
            </select>
          </div>
          <div class="inline">
            <div><label>Tool Diameter</label><input id="diameter" type="number" min="0.1" step="0.01" value="6"></div>
            <div><label class="muted">Unit</label>
              <select id="diaUnit"><option value="mm" selected>mm</option><option value="inch">inch</option></select>
            </div>
          </div>
          <div><label>Flutes</label><input id="flutes" type="number" min="1" step="1" value="2"></div>
          <div><label>Spindle RPM</label><input id="rpm" type="number" min="1000" step="100" value="18000"></div>
        </div>
        <div style="height:8px"></div>
        <div class="section-title">Engagement</div>
        <div class="grid cols-2">
          <div class="range"><label style="min-width:120px">Width of Cut</label><input id="woc" type="range" min="5" max="100" value="50"><span class="pill"><span id="wocVal">50</span>% D</span></div>
          <div class="range"><label style="min-width:120px">Depth of Cut</label><input id="doc" type="range" min="10" max="150" value="100"><span class="pill"><span id="docVal">100</span>% D</span></div>
        </div>
        <div style="height:8px"></div>
        <div class="section-title">Chipload</div>
        <div class="grid cols-2">
          <div class="inline">
            <div><label>Chipload per tooth</label><input id="chipload" type="number" min="0.001" step="0.001"></div>
            <div><label class="muted">Unit</label>
              <select id="chipUnit"><option value="mm" selected>mm</option><option value="inch">inch</option></select>
            </div>
          </div>
          <div>
            <label class="muted">Recommended range</label>
            <div class="help"><span id="recRange">—</span> <button id="useRec" class="btn secondary" style="margin-left:8px">Use mid</button></div>
          </div>
        </div>
        <div class="help" style="margin-top:8px">Chipload auto-suggests from material + diameter and adjusts for engagement. Override any time.</div>
      </div>

      <div class="card">
        <div class="section-title">Results</div>
        <div class="grid cols-2">
          <div>
            <label>Feed rate</label>
            <div class="inline"><div class="result" id="feedOut">—</div>
              <select id="feedUnit">
                <option value="mm_min" selected>mm/min</option>
                <option value="mm_sec">mm/sec</option>
                <option value="in_min">in/min</option>
                <option value="in_sec">in/sec</option>
              </select>
            </div>
          </div>
          <div>
            <label>Spindle surface speed (SFM / m/min)</label>
            <div class="row">
              <div><span class="muted">SFM</span><div class="code" id="sfm">—</div></div>
              <div><span class="muted">m/min</span><div class="code" id="mspeed">—</div></div>
              <div><span class="muted">Chip thinning factor</span><div class="code" id="factor">—</div></div>
            </div>
          </div>
        </div>
        <div style="margin-top:12px" class="help">Formula: <span class="code">Feed = RPM × Flutes × Chipload</span>.</div>
      </div>
    </div>

    <div style="height:16px"></div>
    <div class="card">
      <div class="section-title">Notes</div>
      <div class="help">Values are conservative starting points for common carbide router tools. Verify workholding, listen for chatter, and test on scrap.</div>
    </div>
  </div>
  <footer>© maconSTUFF</footer>
</div>

<script>
(function(){
  const mmToIn = mm => mm / 25.4;
  const inToMm = inches => inches * 25.4;
  const chipTable = {
    ply_mdf:{s:[0.03,0.05],m:[0.05,0.10],l:[0.10,0.20],xl:[0.20,0.35]},
    hardwood:{s:[0.025,0.04],m:[0.04,0.08],l:[0.08,0.15],xl:[0.15,0.30]},
    softwood:{s:[0.04,0.08],m:[0.08,0.16],l:[0.16,0.30],xl:[0.30,0.45]},
    acrylic:{s:[0.03,0.06],m:[0.06,0.12],l:[0.12,0.20],xl:[0.20,0.30]},
    aluminum:{s:[0.01,0.03],m:[0.02,0.05],l:[0.03,0.08],xl:[0.06,0.12]},
    brass:{s:[0.015,0.035],m:[0.03,0.06],l:[0.05,0.10],xl:[0.10,0.16]}
  };
  const bracket = dmm => dmm<=3?'s':dmm<=6?'m':dmm<=12.7?'l':'xl';
  const engagementFactor = w => w>=90?0.6:w>=50?0.8:w>=25?1.0:1.1;

  function calc(root){
    const g = id => root.querySelector('#'+id);
    const material = g('material').value;
    const diaVal = parseFloat(g('diameter').value)||0;
    const diaUnit = g('diaUnit').value;
    const flutes = parseInt(g('flutes').value)||0;
    const rpm = parseInt(g('rpm').value)||0;
    const chipUnit = g('chipUnit').value;
    const feedUnit = g('feedUnit').value;
    const woc = parseInt(g('woc').value)||50;
    const doc = parseInt(g('doc').value)||100;
    g('wocVal').textContent = woc; g('docVal').textContent = doc;

    const dmm = diaUnit==='mm' ? diaVal : inToMm(diaVal);
    const [lo, hi] = chipTable[material][bracket(dmm)];
    const factor = engagementFactor(woc); const adjLo = lo*factor, adjHi = hi*factor;
    g('factor').textContent = factor.toFixed(2);

    const mmToUnit = mm => chipUnit==='mm' ? mm : mmToIn(mm);
    const dispLo = mmToUnit(adjLo), dispHi = mmToUnit(adjHi);
    g('recRange').textContent = dispLo.toFixed(3)+' – '+dispHi.toFixed(3)+' '+chipUnit+'/tooth';

    const chipInput = g('chipload');
    if (!chipInput.value){ chipInput.value = ((dispLo+dispHi)/2).toFixed(3); }
    const chip_mm = (chipUnit==='mm' ? parseFloat(chipInput.value)||0 : inToMm(parseFloat(chipInput.value)||0));

    const feed_mm_min = rpm * flutes * chip_mm;
    let outVal = feed_mm_min, unit = 'mm/min';
    if (feedUnit==='mm_sec') { outVal /= 60; unit='mm/sec'; }
    if (feedUnit==='in_min') { outVal = mmToIn(outVal); unit='in/min'; }
    if (feedUnit==='in_sec') { outVal = mmToIn(outVal)/60; unit='in/sec'; }
    g('feedOut').textContent = isFinite(outVal) ? outVal.toFixed(0)+' '+unit : '—';

    const dia_in = mmToIn(dmm);
    const sfm = (Math.PI * dia_in * rpm) / 12;
    const mmin = (Math.PI * dmm * rpm) / 1000;
    g('sfm').textContent = isFinite(sfm)? sfm.toFixed(0) : '—';
    g('mspeed').textContent = isFinite(mmin)? mmin.toFixed(1) : '—';
  }

  function attach(){
    const root = document.getElementById('feeds-app');
    if (!root || root.dataset.init === '1') return;
    root.dataset.init = '1';
    ['material','diameter','diaUnit','flutes','rpm','chipUnit','chipload','feedUnit','woc','doc']
      .forEach(id => root.querySelector('#'+id).addEventListener('input', () => calc(root)));
    root.querySelector('#useRec').addEventListener('click', () => {
      const txt = root.querySelector('#recRange').textContent;
      const parts = txt.split('–'); const a = parseFloat(parts[0]); const b = parseFloat(parts[1]); const mid = (a+b)/2;
      const chipInput = root.querySelector('#chipload'); chipInput.value = isFinite(mid)? mid.toFixed(3):chipInput.value;
      calc(root);
    });
    calc(root);
  }
  attach();
})();
</script>
</body>
</html>
